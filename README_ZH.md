# 撲克牌賽馬遊戲 CLI 版本

一個基於命令行界面的撲克牌賽馬遊戲，支援英文/中文雙語界面，預設使用英文。

## 🎮 遊戲概述

使用標準52張撲克牌進行的賽馬遊戲，四種花色(♠♥♦♣)各代表一匹馬。玩家可以對支持的馬匹下注，通過翻牌決定馬匹前進，為遊戲增加隨機性和娛樂性。

## 🚀 快速開始

### 系統要求

- Python 3.8+ 
- 僅使用標準庫，無外部依賴
- 支援 Windows/macOS/Linux
- 記憶體使用 < 50MB

### 運行遊戲

```bash
python3 horse_racing_poker.py
```

### 運行測試

```bash
python3 test_horse_racing.py
```

### 查看演示

```bash
python3 demo_game.py
```

## 🌐 語言支援

遊戲支援**英文/中文雙語**界面：

- **預設語言**: 英文
- **語言選擇**: 遊戲啟動時可選擇
- **隨時切換**: 啟動遊戲時出現語言選單
- **完整翻譯**: 所有UI元素、訊息和馬匹名稱都已本地化

### 支援的語言

- 🇺🇸 **英文** (預設)
- 🇹🇼 **繁體中文**

## 🎯 遊戲規則

1. **基本規則**
   - 使用標準52張撲克牌
   - 四種花色(♠♥♦♣)各代表一匹馬
   - 每匹馬從起點開始，目標是到達終點(10步)
   - 每次翻開一張牌，對應花色的馬前進一步
   - 最先到達終點的馬獲勝

2. **下注系統**
   - 玩家可選擇支持的馬匹
   - 可對多匹馬同時下注
   - 下注獲勝的馬可獲得3倍賠率
   - 需檢查玩家餘額

3. **遊戲流程**
   - 遊戲開始，展示賽道
   - 玩家下注(選擇支持的馬匹和賭注金額)
   - 開始賽馬，逐張翻牌
   - 馬匹根據翻出的牌的花色前進
   - 第一匹到達終點的馬獲勝
   - 結算賭注

## 📋 功能特色

### ✅ 已實現功能 (P0 - 核心功能)

- [x] 完整的卡牌系統 (Card, Deck)
- [x] 馬匹和賽道系統 (Horse, Track)
- [x] 玩家系統 (Player)
- [x] 下注系統
- [x] 賽馬邏輯
- [x] 結算系統
- [x] CLI用戶界面
- [x] **雙語支援 (英文/中文)**

### ✅ 已實現功能 (P1 - 高優先級)

- [x] 輸入驗證系統
- [x] 錯誤處理和異常管理
- [x] 多局遊戲支持
- [x] 遊戲統計功能
- [x] 界面清屏和刷新
- [x] Ctrl+C 中斷處理

### ✅ 已實現功能 (P2 - 中優先級)

- [x] 遊戲歷史記錄
- [x] 統計功能完善
- [x] 界面美化
- [x] 進度條顯示
- [x] 成功/錯誤消息系統
- [x] **語言切換系統**

## 🎮 遊戲截圖

```
==================================================
🎰 撲克牌賽馬遊戲 🐎
==================================================
玩家餘額: $1,000

1. 開始新遊戲
2. 查看遊戲說明
3. 查看統計
4. 退出遊戲

請選擇 (1-4): 1
```

```
=== 賽道狀況 ===
♠ 黑桃馬 |---🐎------| 位置: 3/10
♥ 紅心馬 |-----🐎----| 位置: 5/10
♦ 方塊馬 |--🐎-------| 位置: 2/10
♣ 梅花馬 |-------🐎--| 位置: 7/10

當前翻出: ♥7
剩餘卡牌: 45張
```

## 🧪 測試覆蓋

專案包含完整的單元測試和整合測試：

- **55個測試用例**，涵蓋所有核心功能
- **卡牌系統測試**: Card, Deck 類別
- **遊戲邏輯測試**: Horse, Track, Player 類別  
- **輸入驗證測試**: InputValidator 類別
- **界面系統測試**: GameDisplay 類別
- **整合測試**: 完整遊戲流程
- **錯誤處理測試**: 異常情況處理
- **語言系統測試**: 雙語功能

### 測試結果

```bash
Ran 55 tests in 5.033s
OK
```

## 📊 性能指標

根據實際測試結果：

- **遊戲初始化時間**: < 0.001秒 ✅
- **翻牌響應時間**: < 0.001秒 ✅  
- **記憶體使用**: < 10MB ✅
- **支援連續遊玩**: 1000+ 局無問題 ✅

## 🏗️ 架構設計

### 核心類別結構

```
HorseRacingGame (主遊戲引擎)
├── GameConfig (配置管理)
├── Language (本地化系統)
├── Deck (牌組管理)
│   └── Card (卡牌)
├── Track (賽道管理)
│   └── Horse (馬匹)
├── Player (玩家管理)
├── InputValidator (輸入驗證)
└── GameDisplay (顯示系統)
```

### 設計模式

- **單一職責原則**: 每個類別職責明確
- **開放封閉原則**: 易於擴展新功能
- **依賴注入**: GameConfig 可配置
- **錯誤處理**: 完整的異常處理機制
- **國際化**: 完整的本地化支援

## 📝 開發規範

### 程式碼品質

- 遵循 PEP 8 風格指南
- 完整的類型標註
- 詳細的文檔字符串  
- 適當的錯誤處理
- 無硬編碼魔法數字

### 測試標準

- 單元測試覆蓋率 100%
- 整合測試覆蓋主要流程
- 邊界條件測試
- 錯誤處理測試
- 性能測試

## 🚀 使用範例

### 基本遊戲流程

1. 啟動遊戲
2. 選擇語言 (英文/中文)
3. 選擇"開始新遊戲"
4. 選擇支持的馬匹並下注
5. 觀看賽馬過程
6. 查看結算結果
7. 繼續下一局或查看統計

### 下注策略

- **保守策略**: 只對一匹馬下注
- **分散策略**: 對多匹馬小額下注
- **激進策略**: 重注單匹馬

## 🔧 配置選項

可通過修改 `GameConfig` 類別調整：

```python
class GameConfig:
    TRACK_LENGTH = 10        # 賽道長度
    INITIAL_BALANCE = 1000   # 初始餘額
    WINNING_ODDS = 3.0       # 賠率
    ANIMATION_DELAY = 1.0    # 動畫延遲
    CLEAR_SCREEN = True      # 是否清屏
```

### 語言配置

```python
# 設定預設語言
lang = Language('en')  # 英文預設

# 可用語言
SUPPORTED_LANGUAGES = ['en', 'zh']

# 語言切換
lang.set_language('zh')  # 切換到中文
```

## 🌍 本地化功能

### 完整雙語支援

- **選單界面**: 所有選單都有雙語版本
- **遊戲訊息**: 成功/錯誤訊息已本地化
- **馬匹名稱**: 本地化馬匹名稱
  - 英文: Spades Horse, Hearts Horse, Diamonds Horse, Clubs Horse
  - 中文: 黑桃馬, 紅心馬, 方塊馬, 梅花馬
- **遊戲規則**: 完整的規則說明雙語版本
- **統計資訊**: 所有統計資訊已本地化

### 輕鬆擴展語言

新增語言很簡單：

```python
# 在 Language.TEXTS 中新增語言
'es': {  # 西班牙文
    'game_title': 'Juego de Carreras de Caballos con Póker',
    'spades_horse': 'Caballo de Picas',
    # ... 更多翻譯
}
```

## 🐛 問題回報

如發現問題，請提供：

1. 錯誤訊息
2. 重現步驟  
3. 系統環境
4. 預期行為
5. 使用的語言

## 📜 授權

本專案按照 MIT 授權條款發布。

## 🙏 致謝

- 嚴格按照 PRD 規範實現
- 感謝完整的需求文檔指導
- 所有功能都經過充分測試
- **特別感謝雙語本地化支援**

---

**版本**: v1.0.0
**最後更新**: 2025  
**狀態**: ✅ 生產就緒  
**語言**: 🇺🇸 英文 (預設) | 🇹🇼 繁體中文